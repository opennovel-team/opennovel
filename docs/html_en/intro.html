<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>OpenNovel Manual</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>OpenNovel Tutorial</h1>

<h2>Introduction</h2>
<p>
  This tutorial shows how to make a visual novel with OpenNovel.
</p>
<p>
  It's very easy and takes just one hour.
</p>

<h2>Setup</h2>
<p>
  Download the latest release.
</p>

<h2>Examining the sample visual novel project</h2>
<p>
  Open a new project folder.
  It contains all necessary visual novel elements.
  The following is our game folder structure.
</p>
<table>
  <th><td>Name</td><td>Role</td></th>
  <tr><td>txt</td><td>Story script files.</td></tr>
  <tr><td>bg</td><td>Background image files.</td></tr>
  <tr><td>ch</td><td>Character image files.</td></tr>
  <tr><td>rule</td><td>Transition rule image files.</td></tr>
  <tr><td>cg</td><td>Other image files.</td></tr>
  <tr><td>bgm</td><td>BGM audio files.</td></tr>
  <tr><td>se</td><td>Sound effect audio files.</td></tr>
  <tr><td>cv</td><td>Voice audio files.</td></tr>
  <tr><td>anime</td><td>Animation script files.</td></tr>
  <tr><td>gui</td><td>GUI menu script files.</td></tr>
  <tr><td>font</td><td>Font files.</td></tr>
  <tr><td>wms</td><td>WMS script files.</td></tr>
  <tr><td>mov</td><td>Video files.</td></tr>
  <tr><td>project.txt</td><td>Project setting file.</td></tr>
</table>

<h2>Showing a background image</h2>
<p>
  The story file that is executed at boot time is <code>story/story.txt</code>.
  Here, we'll edit the file.
  Remove the contents, then copy-and-paste the following.
  After that, run the game.
</p>

<pre><code>@bg sakura.png 1.0</code></pre>

<p>
  You'll see the rooftop image.
  <code>@bg</code> is a command to show backgrounds.
  <code>roof.png</code> is a file name in the <code>bg</code> folder.
  <code>1.0</code> indicates the transition takes one second.
</p>

<h2>Showing a character image</h2>
<p>
  Remove the content of <code>init.txt</code>, then copy-and-paste the following.
  After that, run the game.
</p>

<pre><code>@bg roof.png 1.0
@ch center chara001.png 1.0</code></pre>

<p>
  You'll first see the rooftop background image, then a character image.
  After clicking the screen, game will close.
  <code>@ch</code> is a command to show a character.
  <code>center</code> means a horizontal position.
  <code>chara001.png</code> is a file name in the <code>ch</code> folder.
  <code>1.0</code> indicates the transition takes one second.
</p>

<h2>Showing a message</h2>
<p>
  Remove the content of the <code>init.txt</code> file, then copy-and-paste the following.
  After that, run the game.
</p>

<pre><code>@bg roof.png 1.0
@ch center chara001.png 1.0
A message shows a text in the message box.
*Name*A line shows a name in a name box and a text in a message box.
*Name*001.ogg*A voice file can be played.</code></pre>

<p>
  You'll see messages.
</p>

<h2>Playing a music file</h2>
<p>
  Remove the content of the <code>init.txt</code> file, then copy-and-paste the following.
  After that, run the game.
</p>

<pre><code>@bgm adventure.ogg
@bg roof.png 1.0
@ch center chara001.png 1.0</code></pre>

<p>
  You'll hear a background music.
  <code>@music</code> is a command to play a background music.
  <code>01.ogg</code> is a file name in the <code>bgm</code> folder.
</p>

<p>
  Music files should be 44.1kHz Ogg Vorbis format. Either stereo or monaural
  ones are acceptable.
</p>

<h2>Showing options</h2>
<p>
  Remove the content of the <code>init.txt</code> file, then copy-and-paste the following.
  After that, run the game.
</p>

<pre><code>@bg roof.png 1.0
@ch center chara001.png 1.0
I'm going to my school.
@choose WALK "I'll take a walk." BIKE "I'll ride my bike."
:WALK
OK, I'll walk.
@goto end
:BIKE
OK, I'll ride my bike.
@goto end
:end</code></pre>

<p>
  You'll see two options.
  <code>@choose</code> is a command to show options.
  <code>WALK</code> and <code>BIKE</code> are our option target labels for when a option is selected.
  A label and sine text next to it form a pair.
  <code>:WALK</code> is a label.
</p>

<h3>Better way to write options</h3>
<p>
  You may ommit labels.
</p>

<pre><code>@bg roof.png 1.0
@ch center chara001.png 1.0
I'm going to my school.

&lt;&lt;&lt;
switch "I'll have a walk." "I'll ride my bike." {
case "I'll have a walk.":
    Ok, I'll walk.
    break
case "I'll ride my bike.":
    Ok, I'll ride my bike.
    break
}
&gt;&gt;&gt;</code></pre>

<h2>Branching a story</h2>
<p>
  Next, we'll branch a story by using a flag.
  Remove the content of the <code>init.txt</code> file, then copy-and-paste the following.
  After that, run the game.
</p>

<pre><code>@bg roof.png 1.0
@ch center chara001.png 1.0

I'm going to my school.

&lt;&lt;&lt;
switch "I'll have a walk." "I'll ride my bike." {
case "I'll have a walk.":
    Ok, I'll walk.
    @set $1 = true
    break
case "I'll ride my bike.":
    Ok, I'll ride my bike.
    break
}
&gt;&gt;&gt;

@if $1 == false NO_MONEY

I found some money on the ground.

:NO_MONEY</code></pre>

<p>
  You'll see "I found some money on the ground." when you chose "I'll have a walk."
</p>

<h3>Flags</h3>
<p>
  We used <code>@set</code> and <code>@if</code> here.
</p>
<p>
  <code>@set</code> is a command to set a flag.
  <code>$1 = true</code> means raising a flag on the variable number <code>1</code>.
  The initial values of variables are all <code>0</code>.
</p>
<p>
  <code>@if</code> is a command to branch by a condition.
  <code>$1 == false</code> means a condition where the variable <code>$1</code> is <code>false</code>.
  <code>NO_MONEY</code> is a destination to go to when the condition is met.
</p>

<h3>Better way to write a branch</h3>
<p>
  You can write a branch without a label.
</p>

<pre><code>&lt;&lt;&lt;
if $1 == 0 {
  I found some money.
}
&gt;&gt;&gt;</code></pre>

<h2>Showing a menu screen</h2>

<p>
  Remove the content of the <code>init.txt</code> file, then copy-and-paste the following.
  After that, run the game.
</p>

<pre><code>@menu title.txt
:START
:LOAD
:CONFIG
:QUIT</code></pre>

<p>
  You'll see a menu screen.
</p>
<p>
  <code>@menu title.txt</code> is a command to call a menu script.
  Here, we call <code>title.txt</code> in the <code>gui/code> folder.
</p>
<p>
  Refer to <a href="menu.html">this document</a> for more information.
</p>

<h2>Dividing a story file</h2>
<p>
  You can divide a story file.
  Make a copy of the <code>init.txt</code> file in the <code>txt</code> folder,
  then rename it to <code>second.txt</code>.
</p>
<p>
  Copy-and-paste the following, then run the game.
</p>

<p>init.txt:</p>
<pre><code>@bg roof.png 1.0
@ch center chara001.png 1.0
We are in init.txt.
@story second.txt</code></pre>

<p>second.txt:</p>
<pre><code>We move to second.txt.</code></pre>

<p>
  You'll see that you have moved to <code>second.txt</code>.
</p>

</body>
</html>
