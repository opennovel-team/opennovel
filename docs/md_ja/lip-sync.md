口パク
=====

## 口パク機能

OpenNovel には、セリフ表示中にキャラの口をアニメで動かす「口パク」機能があります。

## 口パク画像ファイル

口パクの画像ファイルは、キャラクタ本体画像と同じフォルダの中に、`lip` というフォルダを作って格納します。

* happy.png (本体ファイル)
* lip/
    * happy.png (口パクファイル)

口パクの画像ファイルは、口パクのフレーム数の分だけ、キャラの差分画像を横につなげたものです。
1フレームの幅と高さは、本体ファイルの幅と同じにします。
よって、口パクの画像ファイルの幅は、本体画像の幅 × フレーム数 となります。

差分の境界の透明度は、なめらかにする必要があります。
画像編集ツールで、選択範囲のぼかしと削除を利用してください。

## コンフィグ

口パクの間隔は、`project.txt` の下記の箇所で変更できます。

```
#
# 口パクの1フレームの秒数
#
character.lipsync.frame=0.3

#
# 口パクを何文字ごとに行うか
#
character.lipsync.chars=3
```

## 音声シンクロ

今のところ、口パクは文字にシンクロしますが、音声にはシンクロしません。
音声にシンクロするリップシンク技術には特許があり、うかつに利用できないためです。
将来的には特許を避ける形で実装できたらと思います。
